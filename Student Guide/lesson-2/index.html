<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learning SQL with Python</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Sono:wght@200;300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../styles/style.css" />
    <script src="../scripts/script.js" defer></script>
  </head>
  <body>
    <a href="../index.html">
      <img id="fixed-icon" src="../images/home.svg" alt="Open book"
    /></a>
    <div class="container">
      <h1 class="display-8 text-center mt-5 mb-4">
        Lesson 2 - Executing SQL Commands in DB Browser
      </h1>
      <div class="card">
        <div class="card-body">
          <h2 class="card-title">Lesson Overview</h2>
          <p>
            In this lesson, we'll explore how to interact with SQLite databases
            using SQL commands within DB Browser. We'll cover:
          </p>

          <ol>
            <li>
              <b>A New Database - <i>entertainment.db</i>:</b> A more
              comprehensive dataset for practicing SQL queries.
            </li>
            <li>
              <b>The "Execute SQL" Tab:</b> Where you'll write and execute SQL
              commands.
            </li>
            <li>
              <b>SELECT, FROM, WHERE:</b> The essential clauses for retrieving
              specific data.
            </li>
            <li>
              <b>Experimenting with SQL Commands:</b> Hands-on practice with
              SELECT, FROM, WHERE.
            </li>
          </ol>
          <p>
            <img
              class="screenshot"
              src="../images/music.jpg"
              alt="Eighties music and films"
            />
          </p>

          <div class="concept-box">
            <h5 class="card-title">
              <img src="../images/bookmark-book.svg" /> Executing SQL Commands
            </h5>
            <p class="concept">
              While DB Browser's graphical interface provides a gentle
              introduction to SQLite, the true power of this database system
              lies in its ability to understand and respond to
              <span class="redacted">SQL commands</span>. These commands offer a
              precise and <span class="redacted">flexible</span> way to interact
              with your data, allowing you to perform tasks that would be
              cumbersome or impossible with the graphical
              <span class="redacted">interface</span> alone.
            </p>
          </div>
          <h2 class="card-title">A New Database</h2>
          <p>
            For this lesson, we'll be working with a new database called
            "entertainment.db". This database contains information about popular
            80s movies and top selling music albums. To proceed, please open
            this database in DB Browser.
          </p>

          <div class="task-box">
            <h5 class="card-title">
              <img src="../images/task-list.svg" /> Task: Open the
              "entertainment.db" Database
            </h5>
            <ol>
              <li>Go to "File" -> "Open Database".</li>
              <li>
                Locate the "entertainment.db" file and click "Open".
                <p>
                  You should now see the "entertainment.db" database loaded in
                  DB Browser, with the "movies_80s" and "top_albums" tables
                  listed in the "Database Structure" tab.
                </p>
                <img
                  class="screenshot"
                  src="screenshots/entertainment-structure.png"
                  alt="database structure"
                />
              </li>
              <li>
                Take a moment to browse the data, play with filters and get a
                sense of the size of the data set.
              </li>
            </ol>
          </div>
          <h5 class="card-title">Exploring the "entertainment.db" Dataset</h5>
          <p>
            The "entertainment.db" database offers a somewhat limited but
            nonetheless potentially interesting repository of information for
            practising your SQL querying skills. It houses two tables, each with
            a distinct set of attributes:
          </p>

          <div class="concept-box">
            <h5 class="card-title">
              <img src="../images/bookmark-book.svg" /> Structure of
              entertainment.db
            </h5>
            <p class="concept"></p>
            <ul>
              <li>
                <b>"movies_80s"</b>: A
                <span class="redacted">collection</span> of films from the
                1980s, meticulously ranked from 1 to 10 based on
                <span class="redacted">ticket sales</span> for each year. It
                includes details such as title, release date, distributor, and
                genre. One could, for example, query this table to uncover the
                most <span class="redacted">popular</span> genres of the decade
                or to track the performance of a particular
                <span class="redacted">distributor</span> over time.
              </li>
              <li>
                <b>"top_albums"</b>: A compilation of Rolling Stone magazine's
                top 500 albums of all time, as judged in 2012. Or at least, most
                of them. A few entries have been
                <span class="redacted">discreetly removed</span> to ensure this
                tutorial remains suitable for younger audiences, so you may find
                some unexpected gaps in the rankings. The table provides
                information on the ranking, year of release, album title,
                artist, genre, and subgenre. One might, with sufficient effort,
                use SQL to identify trends in musical taste across different
                <span class="redacted">eras</span> or to
                <span class="redacted">analyse</span> the representation of
                various genres within the list.
              </li>
            </ul>
          </div>

          <p>
            With these datasets at your disposal, the possibilities for
            exploration are perhaps not endless, but certainly sufficient for
            our current purposes. But how does one access and analyse this
            information? The "Execute SQL" tab provides the means.
          </p>

          <h2 class="card-title">The "Execute SQL" Tab</h2>
          <p>
            The "Execute SQL" tab in DB Browser is your interface for
            interacting with these datasets using SQL commands. Here, you can
            construct queries to retrieve specific data, filter records based on
            certain criteria, and perform basic calculations.
          </p>

          <p>
            To access this tab, simply click on "Execute SQL" in DB Browser.
            You'll be presented with a text editor for composing your SQL
            queries and a button to execute them. The results will be displayed
            below, offering a glimpse into the patterns and trends hidden within
            the data.
          </p>
          <div class="task-box">
            <h5 class="card-title">
              <img src="../images/task-list.svg" /> Task: Execute an SQL Query
              to Retrieve Top-Ranked Movies
            </h5>
            <ol>
              <li>Open the "Execute SQL" tab in DB Browser.</li>
              <li>
                Type the following SQL query into the query editor:
                <pre><code>SELECT title, release_date FROM movies_80s WHERE rank = 1</code></pre>
              </li>
              <li>
                Press the "Execute" button (looks like the play icon)
                <p>
                  The query result should display the title of the top-ranked
                  movie in the "movies_80s" table from each year, as shown
                  below:
                </p>
                <img
                  class="screenshot"
                  src="screenshots/top-films.png"
                  alt="Top films"
                />
              </li>
              <li>
                Try changing the ranking to a higher number. Do you still
                recognise the film?
              </li>
            </ol>
          </div>

          <p>
            In the following sections, we'll examine the fundamental SQL clauses
            that will enable you to navigate and analyse these datasets with a
            modicum of confidence.
          </p>

          <h2 class="card-title">SELECT, FROM, WHERE</h2>
          <p>
            The SELECT, FROM, and WHERE clauses are the building blocks of SQL
            queries. They allow you to specify what data you want to retrieve
            and under what conditions. Let's break down each clause:
          </p>

          <ul>
            <li>
              <b>SELECT:</b> Specifies the columns you want to retrieve from the
              database.
            </li>
            <li>
              <b>FROM:</b> Specifies the table from which you want to retrieve
              the data.
            </li>
            <li>
              <b>WHERE:</b> Filters the records based on specific conditions.
            </li>
          </ul>
          <div class="concept-box">
            <h5 class="card-title">
              <img src="../images/bookmark-book.svg" /> The WHERE Clause: Your
              Data Detective
            </h5>
            <p class="concept">
              In the world of SQL, the <code>WHERE</code> clause acts like a
              detective, helping you pinpoint exactly the information you need
              from your database. Think of it as a filter that sifts through
              your data and only reveals the records that match your specific
              criteria.
            </p>

            <h5 class="card-title">
              <img src="../images/bookmark-book.svg" /> WHERE in Action:
              "80s_movies"
            </h5>
            <p class="concept">
              Let's say you want to find all the movies in your "<span
                class="redacted"
                >movies_80s</span
              >" table that were <span class="redacted">distributed</span> by
              Warner Bros. You would use the WHERE
              <span class="redacted">clause</span> with a condition
            </p>

            <pre><code>SELECT * FROM movies_80s WHERE <span class="redacted">distributor = 'Warner Bros'</span></code></pre>

            <p class="concept">
              This query tells the database: "Show me all the columns
              <span class="redacted">(*)</span> from the 'movies_80s' table, but
              only where the 'distributor' field is equal to 'Warner Bros.'"
            </p>

            <h5 class="card-title">WHERE's Versatility</h5>
            <p class="concept">
              The WHERE clause is incredibly versatile. You can use it with
              various operators to create different conditions:
            </p>
            <div class="concept">
              <ul>
                <li>=: <span class="redacted">Equal to</span></li>
                <li>
                  != or &lt;&gt;: <span class="redacted">Not equal to</span>
                </li>
                <li>&lt;: <span class="redacted">Less than</span></li>
                <li>&gt;: <span class="redacted">Greater than</span></li>
                <li>
                  &lt;=: Less than
                  <span class="redacted">or</span> equal to
                </li>
                <li>
                  &gt;=: Greater than <span class="redacted">or</span> equal to
                </li>
                <li>
                  LIKE: Matches a <span class="redacted">pattern</span> (e.g.,
                  '1985%')
                </li>
                <li>
                  BETWEEN: Within a <span class="redacted">range</span> of
                  values
                </li>
                <li>
                  IN: Matches <span class="redacted">any</span> value in a list
                </li>
              </ul>
            </div>

            <p class="concept">
              You can even combine multiple conditions using <code>AND</code>,
              <code>OR</code>, and <code>NOT</code> to create more complex
              filters.
            </p>
          </div>
          <p>
            By combining these clauses, you can craft queries that extract
            precisely the information you need. Let's put this into practice
            with a few examples.
          </p>

          <div class="task-box">
            <h5 class="card-title">
              <img src="../images/task-list.svg" /> Task: Practice with SELECT,
              FROM, WHERE
            </h5>
            Try the following queries to retrieve specific data from the
            "movies_80s" table. Try these by yourself, but if you get stuck, you
            can check the solution below each question or better still take a
            "look", "cover", <s>"write"</s>, "query", "check" approach.

            <ol>
              <li>
                Retrieve the title and genre of all movies released in 1985.
                <pre><code><span class="cover">SELECT title, genre FROM movies_80s WHERE release_date = 1985</span></code></pre>
              </li>
              <li>
                Retrieve the title and distributor of movies with a rank greater
                than 5.
                <pre><code><span class="cover">SELECT title, distributor FROM movies_80s WHERE rank > 5</span></code></pre>
              </li>
              <li>
                Retrieve the title and release date of movies with the genre
                "Comedy".
                <pre><code><span class="cover">SELECT title, release_date FROM movies_80s WHERE genre = 'Comedy'</span></code></pre>
              </li>
              <li>
                Retrieve the title and tickets sold of movies with the
                distributor "Warner Bros."
                <pre><code><span class="cover">SELECT title, tickets_sold FROM movies_80s WHERE distributor = 'Warner Bros.'</span></code></pre>
              </li>
              <li>
                Retrieve the title and rank of movies with the genre "Action"
                and a rank less than or equal to 3.
                <pre><code><span class="cover">SELECT title, rank FROM movies_80s WHERE genre = 'Action' AND rank &lt;= 3</span></code></pre>
              </li>
              <li>
                Retrieve the title and release date of movies with a release
                date between 1983 and 1986.
                <pre><code><span class="cover">SELECT title, release_date FROM movies_80s WHERE release_date BETWEEN 1983 AND 1986</span></code></pre>
              </li>
              <li>
                Retrieve the title and distributor of movies with the
                distributor "Universal" or "Columbia".
                <pre><code><span class="cover">SELECT title, distributor FROM movies_80s WHERE distributor = 'Universal' OR distributor = 'Columbia'</span></code></pre>
              </li>
              <li>
                Retrieve the title and genre of movies with a genre in
                ("Comedy", "Adventure", "Action").
                <pre><code><span class="cover">SELECT title, genre FROM movies_80s WHERE genre IN ('Comedy', 'Adventure', 'Action')</span></code></pre>
              </li>
              <li>
                Retrieve the title and tickets sold of movies with a rank
                between 3 and 6, and a release date after 1984.
                <pre><code><span class="cover">SELECT title, tickets_sold FROM movies_80s WHERE rank BETWEEN 3 AND 6 AND release_date > 1984</span></code></pre>
              </li>
              <li>
                Retrieve the title and distributor of movies with a genre not in
                ("Comedy", "Adventure"), a rank less than 5, and tickets sold
                greater than 20,000,000.
                <pre><code><span class="cover">SELECT title, distributor FROM movies_80s WHERE genre NOT IN ('Comedy', 'Adventure') AND rank &lt; 5 AND tickets_sold > 20000000</span></code></pre>
              </li>

              <li>
                Experiment with different combinations of SELECT, FROM, and
                WHERE to explore the dataset further.
              </li>
            </ol>
          </div>

          <p>
            As you practice with these queries, you'll gain a deeper
            understanding of how to extract meaningful insights from the
            dataset. Feel free to experiment and explore the data to your
            heart's content!
          </p>

          <div class="concept-box">
            <h5 class="card-title">
              <img src="../images/bookmark-book.svg" /> Using !=, &lt;>, NOT,
              and Wildcards
            </h5>
            <p>
              In SQL, you can use <code>!=</code> or <code>&lt;></code> to
              express <span class="redacted">"not equal to"</span>. Both
              operators achieve the same result. For instance, to retrieve all
              movies NOT released in 1985, you could use either of the following
              queries:
            </p>

            <pre><code>SELECT * FROM movies_80s WHERE release_date != 1985;</code></pre>
            <pre><code>SELECT * FROM movies_80s WHERE release_date &lt;> 1985;</code></pre>

            <p>
              The keyword <code>NOT</code> is used in different
              <span class="redacted">contexts</span>, such as with the
              <code>IN</code> and <code>BETWEEN</code> operators. For example,
              to retrieve movies with a genre
              <span class="redacted">NOT IN</span> ('Comedy', 'Adventure'), you
              would use:
            </p>

            <pre><code>SELECT * FROM movies_80s WHERE genre NOT IN ('Comedy', 'Adventure');</code></pre>

            <p>
              To search for <span class="redacted">patterns</span> within text
              data, you can use <span class="redacted">wildcards</span> with
              <span class="redacted">LIKE Operator</span>. The most common
              wildcards are:
            </p>
            <ul>
              <li>
                <b>% (percent sign):</b> Represents zero or more characters. For
                example, <code>LIKE '%Rock%'</code> would match "Rock", "Rock
                and Roll", "Psychedelic Rock", and any other string containing
                "Rock".
              </li>
              <li>
                <b>_ (underscore):</b> Represents a single character. For
                example, <code>LIKE 'Bl_es'</code> would match "Blues" but not
                "Blues Rock".
              </li>
            </ul>
            <p>
              For instance, to find all albums with "Rock" in their subgenre
              (remember that an album can have multiple
              <span class="redacted">subgenres</span>, separated by commas and a
              space), you would use:
            </p>
            <pre><code>SELECT * FROM top_albums WHERE subgenre LIKE '%Rock%';</code></pre>
            <img
              class="screenshot"
              src="screenshots/rock-subgenre.png"
              alt="Rock subgenre"
            />
            <p>
              Or to find albums where the artist starts with "The" you would
              use:
            </p>
            <pre><code>SELECT rank, year, album, artist FROM top_albums WHERE artist <span class="redacted">LIKE</span> 'The%';</code></pre>
            <img
              class="screenshot"
              src="screenshots/artists-starting-with-the.png"
              alt="Artists starting with the"
            />
          </div>
          <p>
            The "top_albums" table presents a curated selection of influential
            music albums, spanning various genres and eras. Using the SELECT,
            FROM, and WHERE clauses, you can craft queries to explore this
            dataset in greater detail.
          </p>

          <div class="task-box">
            <h5 class="card-title">
              <img src="../images/task-list.svg" /> Task: Practice - Explore
              "top_albums"
            </h5>
            <p>
              Using your newfound SQL querying skills, answer the following
              questions: Remember to utilise the SELECT, FROM, and WHERE
              clauses, along with the operators we've covered (such as
              <code>=</code>, <code>></code>, <code>&lt;</code>,
              <code>BETWEEN</code>, <code>IN</code>, <code>NOT IN</code>,
              <code>LIKE</code>, etc.) to construct your queries. Again, try
              these by yourself, but if you get stuck, you can check the
              solution below each question or better still take a "look",
              "cover", <s>"write"</s>, "query", "check" approach.
            </p>
            <ol>
              <li>
                Which albums from the 1970s have "Rock" as their genre?
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE year BETWEEN 1970 AND 1979 AND genre = 'Rock'</span></code></pre>
              </li>
              <li>
                What are the titles and artists of the top 10 ranked albums?
                <pre><code><span class="cover">SELECT album, artist FROM top_albums WHERE rank &lt;= 10</span></code></pre>
              </li>
              <li>
                Which albums are classified as "Funk / Soul"?
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE genre = 'Funk / Soul'</span></code></pre>
              </li>
              <li>
                Find all albums with "Blues" in their subgenre.
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE subgenre LIKE '%Blues%'</span></code></pre>
              </li>
              <li>
                Which albums were released between 1965 and 1975, and have
                "Rock" in their genre?
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE year BETWEEN 1965 AND 1975 AND genre = 'Rock'</span></code></pre>
              </li>
              <li>
                Find all albums by The Beatles or The Rolling Stones.
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE artist = 'The Beatles' OR artist = 'The Rolling Stones'</span></code></pre>
              </li>
              <li>
                Which albums have a subgenre of "Folk Rock" or "Pop Rock"?
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE subgenre = 'Folk Rock' OR subgenre = 'Pop Rock'</span></code></pre>
              </li>
              <li>
                Find all albums that are NOT "Rock" genre.
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE genre != 'Rock'</span></code></pre>
              </li>
              <li>
                Which albums ranked between 20 and 50 have "Pop" in their
                subgenre?
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE rank BETWEEN 20 AND 50 AND subgenre LIKE '%Pop%'</span></code></pre>
              </li>
              <li>
                Find all albums with "Alternative" in their subgenre that were
                NOT released in the 1990s.
                <pre><code><span class="cover">SELECT * FROM top_albums WHERE subgenre LIKE '%Alternative%' AND NOT year BETWEEN 1990 AND 1999</span></code></pre>
              </li>
            </ol>
            <p>
              Remember to utilise the SELECT, FROM, and WHERE clauses, along
              with the operators we've covered (such as <code>=</code>,
              <code>></code>, <code>&lt;</code>, <code>BETWEEN</code>,
              <code>IN</code>, <code>NOT IN</code>, <code>LIKE</code>, etc.) to
              construct your queries.
            </p>
          </div>

          <h2 class="card-title">Lesson Summary</h2>
          <p>
            In this lesson, we explored how to interact with SQLite databases
            using SQL commands within DB Browser. We covered the
            "entertainment.db" dataset, the "Execute SQL" tab, and the SELECT,
            FROM, and WHERE clauses. By practicing with SQL queries, you've
            gained a foundational understanding of how to retrieve specific data
            from a database and filter records based on certain criteria.
          </p>
          <div class="concept-box">
            <h5 class="card-title">
              <img src="../images/bookmark-book.svg" />
              <span class="redacted">SQL</span> Formatting Conventions
            </h5>
            <p>
              While <span class="redacted">SQL</span> doesn't enforce strict
              formatting rules, consistent
              <span class="redacted">conventions</span> improve readability.
              Common practices include:
            </p>
            <ul>
              <li>
                <b><span class="redacted">Keywords</span> in uppercase:</b>
                Write SQL keywords (SELECT, FROM, WHERE, etc.) in uppercase to
                distinguish them from other elements in your query.
              </li>
              <li>
                <b>Table and column names in lowercase:</b> Using lowercase for
                table and column names helps maintain consistency and
                differentiate them from keywords.
              </li>
              <li>
                <b>Indentation:</b> Indenting clauses and expressions,
                especially in complex queries, makes the structure of your query
                clearer and easier to follow. For instance, indent the content
                of the WHERE clause in relation to the WHERE keyword itself, and
                indent any AND/OR operators with respect to the WHERE.
                <pre><code>SELECT title, genre
          FROM movies_80s
          WHERE genre = 'Comedy';</code></pre>
              </li>
              <li>
                <b>Newlines:</b> Using newlines to separate different parts of
                your query can also improve readability. For instance, you can
                place each clause (SELECT, FROM, WHERE) on a new line. For
                longer queries, consider placing each column in the SELECT
                statement on a new line. It ultimately doesn't matter if you
                choose to write your query on a single line or multiple lines,
                as long as it is readable.
                <pre><code>SELECT title, genre FROM movies_80s WHERE genre = 'Comedy';</code></pre>
              </li>
            </ul>
            <p>
              These practices make your
              <span class="redacted">SQL</span> queries easier to read and
              modify.
            </p>
          </div>

          <p>
            <a href="../lesson-3" class="btn btn-dark-blue">
              Onwards To Lesson 3</a
            >
          </p>
        </div>
        <!-- end card-body -->
      </div>
      <!-- end card -->
    </div>
    <!-- end container -->
  </body>
</html>
